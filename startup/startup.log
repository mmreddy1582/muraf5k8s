export AWS_ACCOUNT_ID=330428859659
WARNING! Your password will be stored unencrypted in /home/ubuntu/.docker/config.json.
Configure a credential helper to remove this warning. See
https://docs.docker.com/engine/reference/commandline/login/#credentials-store

Login Succeeded
{
    "repository": {
        "repositoryArn": "arn:aws:ecr:eu-central-1:330428859659:repository/nginx-plus-ingress",
        "registryId": "330428859659",
        "repositoryName": "nginx-plus-ingress",
        "repositoryUri": "330428859659.dkr.ecr.eu-central-1.amazonaws.com/nginx-plus-ingress",
        "createdAt": 1663054784.0,
        "imageTagMutability": "MUTABLE",
        "imageScanningConfiguration": {
            "scanOnPush": false
        }
    }
}
{
    "repository": {
        "repositoryArn": "arn:aws:ecr:eu-central-1:330428859659:repository/arcadia-microgateway",
        "registryId": "330428859659",
        "repositoryName": "arcadia-microgateway",
        "repositoryUri": "330428859659.dkr.ecr.eu-central-1.amazonaws.com/arcadia-microgateway",
        "createdAt": 1663054785.0,
        "imageTagMutability": "MUTABLE",
        "imageScanningConfiguration": {
            "scanOnPush": false
        }
    }
}
{
    "repository": {
        "repositoryArn": "arn:aws:ecr:eu-central-1:330428859659:repository/nginx-mesh-metrics",
        "registryId": "330428859659",
        "repositoryName": "nginx-mesh-metrics",
        "repositoryUri": "330428859659.dkr.ecr.eu-central-1.amazonaws.com/nginx-mesh-metrics",
        "createdAt": 1663054787.0,
        "imageTagMutability": "MUTABLE",
        "imageScanningConfiguration": {
            "scanOnPush": false
        }
    }
}
{
    "repository": {
        "repositoryArn": "arn:aws:ecr:eu-central-1:330428859659:repository/nginx-mesh-api",
        "registryId": "330428859659",
        "repositoryName": "nginx-mesh-api",
        "repositoryUri": "330428859659.dkr.ecr.eu-central-1.amazonaws.com/nginx-mesh-api",
        "createdAt": 1663054789.0,
        "imageTagMutability": "MUTABLE",
        "imageScanningConfiguration": {
            "scanOnPush": false
        }
    }
}
{
    "repository": {
        "repositoryArn": "arn:aws:ecr:eu-central-1:330428859659:repository/nginx-mesh-sidecar",
        "registryId": "330428859659",
        "repositoryName": "nginx-mesh-sidecar",
        "repositoryUri": "330428859659.dkr.ecr.eu-central-1.amazonaws.com/nginx-mesh-sidecar",
        "createdAt": 1663054791.0,
        "imageTagMutability": "MUTABLE",
        "imageScanningConfiguration": {
            "scanOnPush": false
        }
    }
}
{
    "repository": {
        "repositoryArn": "arn:aws:ecr:eu-central-1:330428859659:repository/nginx-mesh-init",
        "registryId": "330428859659",
        "repositoryName": "nginx-mesh-init",
        "repositoryUri": "330428859659.dkr.ecr.eu-central-1.amazonaws.com/nginx-mesh-init",
        "createdAt": 1663054792.0,
        "imageTagMutability": "MUTABLE",
        "imageScanningConfiguration": {
            "scanOnPush": false
        }
    }
}
The push refers to repository [330428859659.dkr.ecr.eu-central-1.amazonaws.com/nginx-mesh-metrics]
a3a2447c52c8: Preparing
777b2c648970: Preparing
777b2c648970: Pushed
a3a2447c52c8: Pushed
0.9.0: digest: sha256:edcc20e96c25564d53f0c4e12f72448f602f362f7ff80df724c9cb276f210926 size: 738
The push refers to repository [330428859659.dkr.ecr.eu-central-1.amazonaws.com/nginx-mesh-api]
76cf3323a75e: Preparing
777b2c648970: Preparing
777b2c648970: Pushed
76cf3323a75e: Pushed
0.9.0: digest: sha256:3bd9f09555d3a27c876d7031c5aac53bfd36c504376b8bba49cea1c8eb17938e size: 739
The push refers to repository [330428859659.dkr.ecr.eu-central-1.amazonaws.com/nginx-mesh-sidecar]
b04ea8f160d6: Preparing
23bbbca68376: Preparing
477cf692e28f: Preparing
d5574d434e82: Preparing
fb9915c42a06: Preparing
348513fcb014: Preparing
defb8c3ad100: Preparing
2ffb85eedc24: Preparing
3cee97e64094: Preparing
34ff88bc2411: Preparing
2a56a3bca1b1: Preparing
a9993f0ab524: Preparing
35491ef582a4: Preparing
5c0551624bdc: Preparing
7b84958d05d1: Preparing
e2d64ca880c7: Preparing
886ff7a5ad1e: Preparing
157c4f60ce55: Preparing
375cbcd7bca4: Preparing
da34233bfedd: Preparing
f52be8606854: Preparing
55477a5c5fa9: Preparing
777b2c648970: Preparing
35491ef582a4: Waiting
5c0551624bdc: Waiting
7b84958d05d1: Waiting
e2d64ca880c7: Waiting
886ff7a5ad1e: Waiting
157c4f60ce55: Waiting
375cbcd7bca4: Waiting
da34233bfedd: Waiting
f52be8606854: Waiting
55477a5c5fa9: Waiting
777b2c648970: Waiting
defb8c3ad100: Waiting
2ffb85eedc24: Waiting
3cee97e64094: Waiting
34ff88bc2411: Waiting
2a56a3bca1b1: Waiting
a9993f0ab524: Waiting
348513fcb014: Waiting
d5574d434e82: Pushed
477cf692e28f: Pushed
b04ea8f160d6: Pushed
fb9915c42a06: Pushed
23bbbca68376: Pushed
348513fcb014: Pushed
defb8c3ad100: Pushed
2ffb85eedc24: Pushed
3cee97e64094: Pushed
34ff88bc2411: Pushed
a9993f0ab524: Pushed
2a56a3bca1b1: Pushed
35491ef582a4: Pushed
5c0551624bdc: Pushed
7b84958d05d1: Pushed
886ff7a5ad1e: Pushed
157c4f60ce55: Pushed
375cbcd7bca4: Pushed
e2d64ca880c7: Pushed
da34233bfedd: Pushed
55477a5c5fa9: Pushed
f52be8606854: Pushed
777b2c648970: Pushed
0.9.0: digest: sha256:d4efae89c2430e482bf718ce4c8233625488b533531ac4c02c35e024400b251b size: 5122
The push refers to repository [330428859659.dkr.ecr.eu-central-1.amazonaws.com/nginx-mesh-init]
e73dd6e3190a: Preparing
03593258c147: Preparing
777b2c648970: Preparing
03593258c147: Pushed
e73dd6e3190a: Pushed
777b2c648970: Pushed
0.9.0: digest: sha256:86778a0c6ffd2e8773daa6146755a54ee317ddf140d0bf218ef9259dcb5d6166 size: 948
The push refers to repository [330428859659.dkr.ecr.eu-central-1.amazonaws.com/nginx-plus-ingress]
eefdea47f97f: Preparing
19fe1a920153: Preparing
53e59fd505f9: Preparing
ee6a7184c563: Preparing
276b82551054: Preparing
8c8caba0c5ef: Preparing
02dc88938bf9: Preparing
635cbbf9080f: Preparing
163b301ac89c: Preparing
42ad41548047: Preparing
58e64566d3b6: Preparing
87c8a1d8f54f: Preparing
8c8caba0c5ef: Waiting
02dc88938bf9: Waiting
635cbbf9080f: Waiting
163b301ac89c: Waiting
42ad41548047: Waiting
58e64566d3b6: Waiting
87c8a1d8f54f: Waiting
276b82551054: Pushed
ee6a7184c563: Pushed
19fe1a920153: Pushed
53e59fd505f9: Pushed
eefdea47f97f: Pushed
635cbbf9080f: Pushed
163b301ac89c: Pushed
42ad41548047: Pushed
58e64566d3b6: Pushed
8c8caba0c5ef: Pushed
87c8a1d8f54f: Pushed
02dc88938bf9: Pushed
1.11.1: digest: sha256:d86f8837be0f59330b8fcf30de89a59c8581925d5da1110d3a59a6430ac5cf9b size: 2838
The push refers to repository [330428859659.dkr.ecr.eu-central-1.amazonaws.com/arcadia-microgateway]
3731231b1f79: Preparing
67b4f6ce0528: Preparing
f5515dbda3a2: Preparing
2ce1a585abd6: Preparing
10e6bc6fdee2: Preparing
2ce1a585abd6: Pushed
f5515dbda3a2: Pushed
3731231b1f79: Pushed
10e6bc6fdee2: Pushed
67b4f6ce0528: Pushed
v1: digest: sha256:901f9e256ad8a947e92b91e1d3fd8cf817d2595986593ff1cbb6a008922377b3 size: 1364
Cloning into '/home/ubuntu/lab'...
Switched to a new branch 'udf'
Branch 'udf' set up to track remote branch 'udf' from 'origin'.

[0m[1mInitializing the backend...[0m

[0m[1mInitializing provider plugins...[0m
- Checking for available provider plugins...
- Downloading plugin for provider "random" (hashicorp/random) 3.1.0...
- Downloading plugin for provider "aws" (hashicorp/aws) 3.37.0...

The following providers do not have any version constraints in configuration,
so the latest version was installed.

To prevent automatic upgrades to new major versions that may contain breaking
changes, it is recommended to add version = "..." constraints to the
corresponding provider blocks in configuration, with the constraint strings
suggested below.

* provider.aws: version = "~> 3.37"
* provider.random: version = "~> 3.1"

[33m
[1m[33mWarning: [0m[0m[1mregistry.terraform.io: This version of Terraform has an outdated GPG key and is unable to verify new provider releases. Please upgrade Terraform to at least 0.12.31 to receive new provider updates. For details see: https://discuss.hashicorp.com/t/hcsec-2021-12-codecov-security-event-and-hashicorp-gpg-key-exposure/23512[0m

[0m[0m[0m
[33m
[1m[33mWarning: [0m[0m[1mregistry.terraform.io: This version of Terraform has an outdated GPG key and is unable to verify new provider releases. Please upgrade Terraform to at least 0.12.31 to receive new provider updates. For details see: https://discuss.hashicorp.com/t/hcsec-2021-12-codecov-security-event-and-hashicorp-gpg-key-exposure/23512[0m

[0m[0m[0m
[0m[1m[32mTerraform has been successfully initialized![0m[32m[0m
[0m[32m
You may now begin working with Terraform. Try running "terraform plan" to see
any changes that are required for your infrastructure. All Terraform commands
should now work.

If you ever set or change modules or backend configuration for Terraform,
rerun this command to reinitialize your working directory. If you forget, other
commands will detect it and remind you to do so if necessary.[0m
[0m[1mRefreshing Terraform state in-memory prior to plan...[0m
The refreshed state will be used to calculate this plan, but will not be
persisted to local or remote state storage.
[0m

------------------------------------------------------------------------

An execution plan has been generated and is shown below.
Resource actions are indicated with the following symbols:
  [32m+[0m create
[0m
Terraform will perform the following actions:

[1m  # aws_eks_cluster.demo[0m will be created[0m[0m
[0m  [32m+[0m[0m resource "aws_eks_cluster" "demo" {
      [32m+[0m [0m[1m[0marn[0m[0m                   = (known after apply)
      [32m+[0m [0m[1m[0mcertificate_authority[0m[0m = (known after apply)
      [32m+[0m [0m[1m[0mcreated_at[0m[0m            = (known after apply)
      [32m+[0m [0m[1m[0mendpoint[0m[0m              = (known after apply)
      [32m+[0m [0m[1m[0mid[0m[0m                    = (known after apply)
      [32m+[0m [0m[1m[0midentity[0m[0m              = (known after apply)
      [32m+[0m [0m[1m[0mname[0m[0m                  = (known after apply)
      [32m+[0m [0m[1m[0mplatform_version[0m[0m      = (known after apply)
      [32m+[0m [0m[1m[0mrole_arn[0m[0m              = (known after apply)
      [32m+[0m [0m[1m[0mstatus[0m[0m                = (known after apply)
      [32m+[0m [0m[1m[0mtags[0m[0m                  = (known after apply)
      [32m+[0m [0m[1m[0mversion[0m[0m               = "1.20"

      [32m+[0m [0mkubernetes_network_config {
          [32m+[0m [0m[1m[0mservice_ipv4_cidr[0m[0m = (known after apply)
        }

      [32m+[0m [0mvpc_config {
          [32m+[0m [0m[1m[0mcluster_security_group_id[0m[0m = (known after apply)
          [32m+[0m [0m[1m[0mendpoint_private_access[0m[0m   = false
          [32m+[0m [0m[1m[0mendpoint_public_access[0m[0m    = true
          [32m+[0m [0m[1m[0mpublic_access_cidrs[0m[0m       = (known after apply)
          [32m+[0m [0m[1m[0msecurity_group_ids[0m[0m        = (known after apply)
          [32m+[0m [0m[1m[0msubnet_ids[0m[0m                = (known after apply)
          [32m+[0m [0m[1m[0mvpc_id[0m[0m                    = (known after apply)
        }
    }

[1m  # aws_eks_node_group.demo[0m will be created[0m[0m
[0m  [32m+[0m[0m resource "aws_eks_node_group" "demo" {
      [32m+[0m [0m[1m[0mami_type[0m[0m        = (known after apply)
      [32m+[0m [0m[1m[0marn[0m[0m             = (known after apply)
      [32m+[0m [0m[1m[0mcapacity_type[0m[0m   = (known after apply)
      [32m+[0m [0m[1m[0mcluster_name[0m[0m    = (known after apply)
      [32m+[0m [0m[1m[0mdisk_size[0m[0m       = (known after apply)
      [32m+[0m [0m[1m[0mid[0m[0m              = (known after apply)
      [32m+[0m [0m[1m[0minstance_types[0m[0m  = [
          [32m+[0m [0m"t3.xlarge",
        ]
      [32m+[0m [0m[1m[0mnode_group_name[0m[0m = (known after apply)
      [32m+[0m [0m[1m[0mnode_role_arn[0m[0m   = (known after apply)
      [32m+[0m [0m[1m[0mrelease_version[0m[0m = (known after apply)
      [32m+[0m [0m[1m[0mresources[0m[0m       = (known after apply)
      [32m+[0m [0m[1m[0mstatus[0m[0m          = (known after apply)
      [32m+[0m [0m[1m[0msubnet_ids[0m[0m      = (known after apply)
      [32m+[0m [0m[1m[0mtags[0m[0m            = (known after apply)
      [32m+[0m [0m[1m[0mversion[0m[0m         = (known after apply)

      [32m+[0m [0mscaling_config {
          [32m+[0m [0m[1m[0mdesired_size[0m[0m = 1
          [32m+[0m [0m[1m[0mmax_size[0m[0m     = 4
          [32m+[0m [0m[1m[0mmin_size[0m[0m     = 1
        }
    }

[1m  # aws_iam_instance_profile.iam_nginx_profile[0m will be created[0m[0m
[0m  [32m+[0m[0m resource "aws_iam_instance_profile" "iam_nginx_profile" {
      [32m+[0m [0m[1m[0marn[0m[0m         = (known after apply)
      [32m+[0m [0m[1m[0mcreate_date[0m[0m = (known after apply)
      [32m+[0m [0m[1m[0mid[0m[0m          = (known after apply)
      [32m+[0m [0m[1m[0mname[0m[0m        = (known after apply)
      [32m+[0m [0m[1m[0mpath[0m[0m        = "/"
      [32m+[0m [0m[1m[0mrole[0m[0m        = (known after apply)
      [32m+[0m [0m[1m[0munique_id[0m[0m   = (known after apply)
    }

[1m  # aws_iam_role.demo-master[0m will be created[0m[0m
[0m  [32m+[0m[0m resource "aws_iam_role" "demo-master" {
      [32m+[0m [0m[1m[0marn[0m[0m                   = (known after apply)
      [32m+[0m [0m[1m[0massume_role_policy[0m[0m    = jsonencode(
            {
              [32m+[0m [0mStatement = [
                  [32m+[0m [0m{
                      [32m+[0m [0mAction    = "sts:AssumeRole"
                      [32m+[0m [0mEffect    = "Allow"
                      [32m+[0m [0mPrincipal = {
                          [32m+[0m [0mService = "eks.amazonaws.com"
                        }
                    },
                ]
              [32m+[0m [0mVersion   = "2012-10-17"
            }
        )
      [32m+[0m [0m[1m[0mcreate_date[0m[0m           = (known after apply)
      [32m+[0m [0m[1m[0mforce_detach_policies[0m[0m = false
      [32m+[0m [0m[1m[0mid[0m[0m                    = (known after apply)
      [32m+[0m [0m[1m[0mmanaged_policy_arns[0m[0m   = (known after apply)
      [32m+[0m [0m[1m[0mmax_session_duration[0m[0m  = 3600
      [32m+[0m [0m[1m[0mname[0m[0m                  = (known after apply)
      [32m+[0m [0m[1m[0mpath[0m[0m                  = "/"
      [32m+[0m [0m[1m[0munique_id[0m[0m             = (known after apply)

      [32m+[0m [0minline_policy {
          [32m+[0m [0m[1m[0mname[0m[0m   = (known after apply)
          [32m+[0m [0m[1m[0mpolicy[0m[0m = (known after apply)
        }
    }

[1m  # aws_iam_role.demo-node[0m will be created[0m[0m
[0m  [32m+[0m[0m resource "aws_iam_role" "demo-node" {
      [32m+[0m [0m[1m[0marn[0m[0m                   = (known after apply)
      [32m+[0m [0m[1m[0massume_role_policy[0m[0m    = jsonencode(
            {
              [32m+[0m [0mStatement = [
                  [32m+[0m [0m{
                      [32m+[0m [0mAction    = "sts:AssumeRole"
                      [32m+[0m [0mEffect    = "Allow"
                      [32m+[0m [0mPrincipal = {
                          [32m+[0m [0mService = "ec2.amazonaws.com"
                        }
                    },
                ]
              [32m+[0m [0mVersion   = "2012-10-17"
            }
        )
      [32m+[0m [0m[1m[0mcreate_date[0m[0m           = (known after apply)
      [32m+[0m [0m[1m[0mforce_detach_policies[0m[0m = false
      [32m+[0m [0m[1m[0mid[0m[0m                    = (known after apply)
      [32m+[0m [0m[1m[0mmanaged_policy_arns[0m[0m   = (known after apply)
      [32m+[0m [0m[1m[0mmax_session_duration[0m[0m  = 3600
      [32m+[0m [0m[1m[0mname[0m[0m                  = (known after apply)
      [32m+[0m [0m[1m[0mpath[0m[0m                  = "/"
      [32m+[0m [0m[1m[0munique_id[0m[0m             = (known after apply)

      [32m+[0m [0minline_policy {
          [32m+[0m [0m[1m[0mname[0m[0m   = (known after apply)
          [32m+[0m [0m[1m[0mpolicy[0m[0m = (known after apply)
        }
    }

[1m  # aws_iam_role.web_iam_role[0m will be created[0m[0m
[0m  [32m+[0m[0m resource "aws_iam_role" "web_iam_role" {
      [32m+[0m [0m[1m[0marn[0m[0m                   = (known after apply)
      [32m+[0m [0m[1m[0massume_role_policy[0m[0m    = jsonencode(
            {
              [32m+[0m [0mStatement = [
                  [32m+[0m [0m{
                      [32m+[0m [0mAction    = "sts:AssumeRole"
                      [32m+[0m [0mEffect    = "Allow"
                      [32m+[0m [0mPrincipal = {
                          [32m+[0m [0mService = "ec2.amazonaws.com"
                        }
                      [32m+[0m [0mSid       = ""
                    },
                ]
              [32m+[0m [0mVersion   = "2012-10-17"
            }
        )
      [32m+[0m [0m[1m[0mcreate_date[0m[0m           = (known after apply)
      [32m+[0m [0m[1m[0mforce_detach_policies[0m[0m = false
      [32m+[0m [0m[1m[0mid[0m[0m                    = (known after apply)
      [32m+[0m [0m[1m[0mmanaged_policy_arns[0m[0m   = (known after apply)
      [32m+[0m [0m[1m[0mmax_session_duration[0m[0m  = 3600
      [32m+[0m [0m[1m[0mname[0m[0m                  = (known after apply)
      [32m+[0m [0m[1m[0mpath[0m[0m                  = "/"
      [32m+[0m [0m[1m[0mtags[0m[0m                  = (known after apply)
      [32m+[0m [0m[1m[0munique_id[0m[0m             = (known after apply)

      [32m+[0m [0minline_policy {
          [32m+[0m [0m[1m[0mname[0m[0m   = (known after apply)
          [32m+[0m [0m[1m[0mpolicy[0m[0m = (known after apply)
        }
    }

[1m  # aws_iam_role_policy.web_iam_role_policy[0m will be created[0m[0m
[0m  [32m+[0m[0m resource "aws_iam_role_policy" "web_iam_role_policy" {
      [32m+[0m [0m[1m[0mid[0m[0m     = (known after apply)
      [32m+[0m [0m[1m[0mname[0m[0m   = (known after apply)
      [32m+[0m [0m[1m[0mpolicy[0m[0m = jsonencode(
            {
              [32m+[0m [0mStatement = [
                  [32m+[0m [0m{
                      [32m+[0m [0mAction   = [
                          [32m+[0m [0m"s3:ListBucket",
                        ]
                      [32m+[0m [0mEffect   = "Allow"
                      [32m+[0m [0mResource = [
                          [32m+[0m [0m"arn:aws:s3:::sorinnginx",
                        ]
                    },
                  [32m+[0m [0m{
                      [32m+[0m [0mAction   = [
                          [32m+[0m [0m"s3:PutObject",
                          [32m+[0m [0m"s3:GetObject",
                          [32m+[0m [0m"s3:DeleteObject",
                        ]
                      [32m+[0m [0mEffect   = "Allow"
                      [32m+[0m [0mResource = [
                          [32m+[0m [0m"arn:aws:s3:::sorinnginx/*",
                        ]
                    },
                ]
              [32m+[0m [0mVersion   = "2012-10-17"
            }
        )
      [32m+[0m [0m[1m[0mrole[0m[0m   = (known after apply)
    }

[1m  # aws_iam_role_policy_attachment.demo-cluster-AmazonEKSClusterPolicy[0m will be created[0m[0m
[0m  [32m+[0m[0m resource "aws_iam_role_policy_attachment" "demo-cluster-AmazonEKSClusterPolicy" {
      [32m+[0m [0m[1m[0mid[0m[0m         = (known after apply)
      [32m+[0m [0m[1m[0mpolicy_arn[0m[0m = "arn:aws:iam::aws:policy/AmazonEKSClusterPolicy"
      [32m+[0m [0m[1m[0mrole[0m[0m       = (known after apply)
    }

[1m  # aws_iam_role_policy_attachment.demo-cluster-AmazonEKSServicePolicy[0m will be created[0m[0m
[0m  [32m+[0m[0m resource "aws_iam_role_policy_attachment" "demo-cluster-AmazonEKSServicePolicy" {
      [32m+[0m [0m[1m[0mid[0m[0m         = (known after apply)
      [32m+[0m [0m[1m[0mpolicy_arn[0m[0m = "arn:aws:iam::aws:policy/AmazonEKSServicePolicy"
      [32m+[0m [0m[1m[0mrole[0m[0m       = (known after apply)
    }

[1m  # aws_iam_role_policy_attachment.demo-node-AmazonEC2ContainerRegistryReadOnly[0m will be created[0m[0m
[0m  [32m+[0m[0m resource "aws_iam_role_policy_attachment" "demo-node-AmazonEC2ContainerRegistryReadOnly" {
      [32m+[0m [0m[1m[0mid[0m[0m         = (known after apply)
      [32m+[0m [0m[1m[0mpolicy_arn[0m[0m = "arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly"
      [32m+[0m [0m[1m[0mrole[0m[0m       = (known after apply)
    }

[1m  # aws_iam_role_policy_attachment.demo-node-AmazonEKSWorkerNodePolicy[0m will be created[0m[0m
[0m  [32m+[0m[0m resource "aws_iam_role_policy_attachment" "demo-node-AmazonEKSWorkerNodePolicy" {
      [32m+[0m [0m[1m[0mid[0m[0m         = (known after apply)
      [32m+[0m [0m[1m[0mpolicy_arn[0m[0m = "arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy"
      [32m+[0m [0m[1m[0mrole[0m[0m       = (known after apply)
    }

[1m  # aws_iam_role_policy_attachment.demo-node-AmazonEKS_CNI_Policy[0m will be created[0m[0m
[0m  [32m+[0m[0m resource "aws_iam_role_policy_attachment" "demo-node-AmazonEKS_CNI_Policy" {
      [32m+[0m [0m[1m[0mid[0m[0m         = (known after apply)
      [32m+[0m [0m[1m[0mpolicy_arn[0m[0m = "arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy"
      [32m+[0m [0m[1m[0mrole[0m[0m       = (known after apply)
    }

[1m  # aws_instance.controller[0m will be created[0m[0m
[0m  [32m+[0m[0m resource "aws_instance" "controller" {
      [32m+[0m [0m[1m[0mami[0m[0m                          = "ami-0f5b07b31937d4275"
      [32m+[0m [0m[1m[0marn[0m[0m                          = (known after apply)
      [32m+[0m [0m[1m[0massociate_public_ip_address[0m[0m  = true
      [32m+[0m [0m[1m[0mavailability_zone[0m[0m            = "eu-west-1a"
      [32m+[0m [0m[1m[0mcpu_core_count[0m[0m               = (known after apply)
      [32m+[0m [0m[1m[0mcpu_threads_per_core[0m[0m         = (known after apply)
      [32m+[0m [0m[1m[0mget_password_data[0m[0m            = false
      [32m+[0m [0m[1m[0mhost_id[0m[0m                      = (known after apply)
      [32m+[0m [0m[1m[0mid[0m[0m                           = (known after apply)
      [32m+[0m [0m[1m[0minstance_state[0m[0m               = (known after apply)
      [32m+[0m [0m[1m[0minstance_type[0m[0m                = "t3.2xlarge"
      [32m+[0m [0m[1m[0mipv6_address_count[0m[0m           = (known after apply)
      [32m+[0m [0m[1m[0mipv6_addresses[0m[0m               = (known after apply)
      [32m+[0m [0m[1m[0mkey_name[0m[0m                     = (known after apply)
      [32m+[0m [0m[1m[0moutpost_arn[0m[0m                  = (known after apply)
      [32m+[0m [0m[1m[0mpassword_data[0m[0m                = (known after apply)
      [32m+[0m [0m[1m[0mplacement_group[0m[0m              = (known after apply)
      [32m+[0m [0m[1m[0mprimary_network_interface_id[0m[0m = (known after apply)
      [32m+[0m [0m[1m[0mprivate_dns[0m[0m                  = (known after apply)
      [32m+[0m [0m[1m[0mprivate_ip[0m[0m                   = (known after apply)
      [32m+[0m [0m[1m[0mpublic_dns[0m[0m                   = (known after apply)
      [32m+[0m [0m[1m[0mpublic_ip[0m[0m                    = (known after apply)
      [32m+[0m [0m[1m[0msecondary_private_ips[0m[0m        = (known after apply)
      [32m+[0m [0m[1m[0msecurity_groups[0m[0m              = (known after apply)
      [32m+[0m [0m[1m[0msource_dest_check[0m[0m            = true
      [32m+[0m [0m[1m[0msubnet_id[0m[0m                    = (known after apply)
      [32m+[0m [0m[1m[0mtags[0m[0m                         = (known after apply)
      [32m+[0m [0m[1m[0mtenancy[0m[0m                      = (known after apply)
      [32m+[0m [0m[1m[0muser_data[0m[0m                    = "e70117ac788c97e626c1a21dbf5e2aac82c7cb0c"
      [32m+[0m [0m[1m[0mvpc_security_group_ids[0m[0m       = (known after apply)

      [32m+[0m [0mebs_block_device {
          [32m+[0m [0m[1m[0mdelete_on_termination[0m[0m = (known after apply)
          [32m+[0m [0m[1m[0mdevice_name[0m[0m           = (known after apply)
          [32m+[0m [0m[1m[0mencrypted[0m[0m             = (known after apply)
          [32m+[0m [0m[1m[0miops[0m[0m                  = (known after apply)
          [32m+[0m [0m[1m[0mkms_key_id[0m[0m            = (known after apply)
          [32m+[0m [0m[1m[0msnapshot_id[0m[0m           = (known after apply)
          [32m+[0m [0m[1m[0mtags[0m[0m                  = (known after apply)
          [32m+[0m [0m[1m[0mthroughput[0m[0m            = (known after apply)
          [32m+[0m [0m[1m[0mvolume_id[0m[0m             = (known after apply)
          [32m+[0m [0m[1m[0mvolume_size[0m[0m           = (known after apply)
          [32m+[0m [0m[1m[0mvolume_type[0m[0m           = (known after apply)
        }

      [32m+[0m [0menclave_options {
          [32m+[0m [0m[1m[0menabled[0m[0m = (known after apply)
        }

      [32m+[0m [0mephemeral_block_device {
          [32m+[0m [0m[1m[0mdevice_name[0m[0m  = (known after apply)
          [32m+[0m [0m[1m[0mno_device[0m[0m    = (known after apply)
          [32m+[0m [0m[1m[0mvirtual_name[0m[0m = (known after apply)
        }

      [32m+[0m [0mmetadata_options {
          [32m+[0m [0m[1m[0mhttp_endpoint[0m[0m               = (known after apply)
          [32m+[0m [0m[1m[0mhttp_put_response_hop_limit[0m[0m = (known after apply)
          [32m+[0m [0m[1m[0mhttp_tokens[0m[0m                 = (known after apply)
        }

      [32m+[0m [0mnetwork_interface {
          [32m+[0m [0m[1m[0mdelete_on_termination[0m[0m = (known after apply)
          [32m+[0m [0m[1m[0mdevice_index[0m[0m          = (known after apply)
          [32m+[0m [0m[1m[0mnetwork_interface_id[0m[0m  = (known after apply)
        }

      [32m+[0m [0mroot_block_device {
          [32m+[0m [0m[1m[0mdelete_on_termination[0m[0m = true
          [32m+[0m [0m[1m[0mdevice_name[0m[0m           = (known after apply)
          [32m+[0m [0m[1m[0mencrypted[0m[0m             = (known after apply)
          [32m+[0m [0m[1m[0miops[0m[0m                  = (known after apply)
          [32m+[0m [0m[1m[0mkms_key_id[0m[0m            = (known after apply)
          [32m+[0m [0m[1m[0mthroughput[0m[0m            = (known after apply)
          [32m+[0m [0m[1m[0mvolume_id[0m[0m             = (known after apply)
          [32m+[0m [0m[1m[0mvolume_size[0m[0m           = 80
          [32m+[0m [0m[1m[0mvolume_type[0m[0m           = (known after apply)
        }
    }

[1m  # aws_internet_gateway.gw[0m will be created[0m[0m
[0m  [32m+[0m[0m resource "aws_internet_gateway" "gw" {
      [32m+[0m [0m[1m[0marn[0m[0m      = (known after apply)
      [32m+[0m [0m[1m[0mid[0m[0m       = (known after apply)
      [32m+[0m [0m[1m[0mowner_id[0m[0m = (known after apply)
      [32m+[0m [0m[1m[0mtags[0m[0m     = (known after apply)
      [32m+[0m [0m[1m[0mvpc_id[0m[0m   = (known after apply)
    }

[1m  # aws_key_pair.main[0m will be created[0m[0m
[0m  [32m+[0m[0m resource "aws_key_pair" "main" {
      [32m+[0m [0m[1m[0marn[0m[0m         = (known after apply)
      [32m+[0m [0m[1m[0mfingerprint[0m[0m = (known after apply)
      [32m+[0m [0m[1m[0mid[0m[0m          = (known after apply)
      [32m+[0m [0m[1m[0mkey_name[0m[0m    = (known after apply)
      [32m+[0m [0m[1m[0mkey_pair_id[0m[0m = (known after apply)
      [32m+[0m [0m[1m[0mpublic_key[0m[0m  = "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC3Iqkg5W++IeUJqDqQ9GY/I9QaSVa7YWqaDF70OvmWBLIDkKw0gq/qVkIqEzBt90r5N6T6iz9It+bFOtBxbWetLeLVsh3MM5LZ/jfV7DsI/KTioSxejZzkgmUNhfCQk3mQE+64g3Nuo2QUpiuPb35JkX81zFuWhNY6DNBzUBrpY5lVMkfot/N2CWmmv+K+VA9YkDIauFg6yxYed3G02ieb6LHH06p8E88CYnJfNF1pizH38Xzmth7nkF/3/gL3g6uokilkzCs3dpVlGpTjji4SB0OSMMhDJkns+S6jQ0Jf6IY00Ful8Vpx30Cmaqr+Jdt2J3KXmaLde8qRUISrj+cj ubuntu@ubuntu"
    }

[1m  # aws_route_table.web-public-rt[0m will be created[0m[0m
[0m  [32m+[0m[0m resource "aws_route_table" "web-public-rt" {
      [32m+[0m [0m[1m[0marn[0m[0m              = (known after apply)
      [32m+[0m [0m[1m[0mid[0m[0m               = (known after apply)
      [32m+[0m [0m[1m[0mowner_id[0m[0m         = (known after apply)
      [32m+[0m [0m[1m[0mpropagating_vgws[0m[0m = (known after apply)
      [32m+[0m [0m[1m[0mroute[0m[0m            = [
          [32m+[0m [0m{
              [32m+[0m [0mcarrier_gateway_id         = ""
              [32m+[0m [0mcidr_block                 = "0.0.0.0/0"
              [32m+[0m [0mdestination_prefix_list_id = ""
              [32m+[0m [0megress_only_gateway_id     = ""
              [32m+[0m [0mgateway_id                 = (known after apply)
              [32m+[0m [0minstance_id                = ""
              [32m+[0m [0mipv6_cidr_block            = ""
              [32m+[0m [0mlocal_gateway_id           = ""
              [32m+[0m [0mnat_gateway_id             = ""
              [32m+[0m [0mnetwork_interface_id       = ""
              [32m+[0m [0mtransit_gateway_id         = ""
              [32m+[0m [0mvpc_endpoint_id            = ""
              [32m+[0m [0mvpc_peering_connection_id  = ""
            },
        ]
      [32m+[0m [0m[1m[0mtags[0m[0m             = (known after apply)
      [32m+[0m [0m[1m[0mvpc_id[0m[0m           = (known after apply)
    }

[1m  # aws_route_table_association.web-private-rt[0m will be created[0m[0m
[0m  [32m+[0m[0m resource "aws_route_table_association" "web-private-rt" {
      [32m+[0m [0m[1m[0mid[0m[0m             = (known after apply)
      [32m+[0m [0m[1m[0mroute_table_id[0m[0m = (known after apply)
      [32m+[0m [0m[1m[0msubnet_id[0m[0m      = (known after apply)
    }

[1m  # aws_route_table_association.web-public-rt[0m will be created[0m[0m
[0m  [32m+[0m[0m resource "aws_route_table_association" "web-public-rt" {
      [32m+[0m [0m[1m[0mid[0m[0m             = (known after apply)
      [32m+[0m [0m[1m[0mroute_table_id[0m[0m = (known after apply)
      [32m+[0m [0m[1m[0msubnet_id[0m[0m      = (known after apply)
    }

[1m  # aws_security_group.sgweb[0m will be created[0m[0m
[0m  [32m+[0m[0m resource "aws_security_group" "sgweb" {
      [32m+[0m [0m[1m[0marn[0m[0m                    = (known after apply)
      [32m+[0m [0m[1m[0mdescription[0m[0m            = "Allow traffic from public subnet"
      [32m+[0m [0m[1m[0megress[0m[0m                 = [
          [32m+[0m [0m{
              [32m+[0m [0mcidr_blocks      = [
                  [32m+[0m [0m"0.0.0.0/0",
                ]
              [32m+[0m [0mdescription      = ""
              [32m+[0m [0mfrom_port        = 0
              [32m+[0m [0mipv6_cidr_blocks = []
              [32m+[0m [0mprefix_list_ids  = []
              [32m+[0m [0mprotocol         = "-1"
              [32m+[0m [0msecurity_groups  = []
              [32m+[0m [0mself             = false
              [32m+[0m [0mto_port          = 0
            },
        ]
      [32m+[0m [0m[1m[0mid[0m[0m                     = (known after apply)
      [32m+[0m [0m[1m[0mingress[0m[0m                = [
          [32m+[0m [0m{
              [32m+[0m [0mcidr_blocks      = [
                  [32m+[0m [0m"0.0.0.0/0",
                ]
              [32m+[0m [0mdescription      = ""
              [32m+[0m [0mfrom_port        = 0
              [32m+[0m [0mipv6_cidr_blocks = []
              [32m+[0m [0mprefix_list_ids  = []
              [32m+[0m [0mprotocol         = "-1"
              [32m+[0m [0msecurity_groups  = []
              [32m+[0m [0mself             = false
              [32m+[0m [0mto_port          = 0
            },
        ]
      [32m+[0m [0m[1m[0mname[0m[0m                   = "sg_test_web"
      [32m+[0m [0m[1m[0mname_prefix[0m[0m            = (known after apply)
      [32m+[0m [0m[1m[0mowner_id[0m[0m               = (known after apply)
      [32m+[0m [0m[1m[0mrevoke_rules_on_delete[0m[0m = false
      [32m+[0m [0m[1m[0mtags[0m[0m                   = (known after apply)
      [32m+[0m [0m[1m[0mvpc_id[0m[0m                 = (known after apply)
    }

[1m  # aws_subnet.management-subnet[0m will be created[0m[0m
[0m  [32m+[0m[0m resource "aws_subnet" "management-subnet" {
      [32m+[0m [0m[1m[0marn[0m[0m                             = (known after apply)
      [32m+[0m [0m[1m[0massign_ipv6_address_on_creation[0m[0m = false
      [32m+[0m [0m[1m[0mavailability_zone[0m[0m               = "eu-west-1a"
      [32m+[0m [0m[1m[0mavailability_zone_id[0m[0m            = (known after apply)
      [32m+[0m [0m[1m[0mcidr_block[0m[0m                      = "10.0.1.0/24"
      [32m+[0m [0m[1m[0mid[0m[0m                              = (known after apply)
      [32m+[0m [0m[1m[0mipv6_cidr_block_association_id[0m[0m  = (known after apply)
      [32m+[0m [0m[1m[0mmap_public_ip_on_launch[0m[0m         = true
      [32m+[0m [0m[1m[0mowner_id[0m[0m                        = (known after apply)
      [32m+[0m [0m[1m[0mtags[0m[0m                            = (known after apply)
      [32m+[0m [0m[1m[0mtags_all[0m[0m                        = (known after apply)
      [32m+[0m [0m[1m[0mvpc_id[0m[0m                          = (known after apply)
    }

[1m  # aws_subnet.private-subnet[0m will be created[0m[0m
[0m  [32m+[0m[0m resource "aws_subnet" "private-subnet" {
      [32m+[0m [0m[1m[0marn[0m[0m                             = (known after apply)
      [32m+[0m [0m[1m[0massign_ipv6_address_on_creation[0m[0m = false
      [32m+[0m [0m[1m[0mavailability_zone[0m[0m               = "eu-west-1b"
      [32m+[0m [0m[1m[0mavailability_zone_id[0m[0m            = (known after apply)
      [32m+[0m [0m[1m[0mcidr_block[0m[0m                      = "10.0.3.0/24"
      [32m+[0m [0m[1m[0mid[0m[0m                              = (known after apply)
      [32m+[0m [0m[1m[0mipv6_cidr_block_association_id[0m[0m  = (known after apply)
      [32m+[0m [0m[1m[0mmap_public_ip_on_launch[0m[0m         = true
      [32m+[0m [0m[1m[0mowner_id[0m[0m                        = (known after apply)
      [32m+[0m [0m[1m[0mtags[0m[0m                            = (known after apply)
      [32m+[0m [0m[1m[0mtags_all[0m[0m                        = (known after apply)
      [32m+[0m [0m[1m[0mvpc_id[0m[0m                          = (known after apply)
    }

[1m  # aws_subnet.public-subnet[0m will be created[0m[0m
[0m  [32m+[0m[0m resource "aws_subnet" "public-subnet" {
      [32m+[0m [0m[1m[0marn[0m[0m                             = (known after apply)
      [32m+[0m [0m[1m[0massign_ipv6_address_on_creation[0m[0m = false
      [32m+[0m [0m[1m[0mavailability_zone[0m[0m               = "eu-west-1a"
      [32m+[0m [0m[1m[0mavailability_zone_id[0m[0m            = (known after apply)
      [32m+[0m [0m[1m[0mcidr_block[0m[0m                      = "10.0.2.0/24"
      [32m+[0m [0m[1m[0mid[0m[0m                              = (known after apply)
      [32m+[0m [0m[1m[0mipv6_cidr_block_association_id[0m[0m  = (known after apply)
      [32m+[0m [0m[1m[0mmap_public_ip_on_launch[0m[0m         = true
      [32m+[0m [0m[1m[0mowner_id[0m[0m                        = (known after apply)
      [32m+[0m [0m[1m[0mtags[0m[0m                            = (known after apply)
      [32m+[0m [0m[1m[0mtags_all[0m[0m                        = (known after apply)
      [32m+[0m [0m[1m[0mvpc_id[0m[0m                          = (known after apply)
    }

[1m  # aws_vpc.main[0m will be created[0m[0m
[0m  [32m+[0m[0m resource "aws_vpc" "main" {
      [32m+[0m [0m[1m[0marn[0m[0m                              = (known after apply)
      [32m+[0m [0m[1m[0massign_generated_ipv6_cidr_block[0m[0m = false
      [32m+[0m [0m[1m[0mcidr_block[0m[0m                       = "10.0.0.0/16"
      [32m+[0m [0m[1m[0mdefault_network_acl_id[0m[0m           = (known after apply)
      [32m+[0m [0m[1m[0mdefault_route_table_id[0m[0m           = (known after apply)
      [32m+[0m [0m[1m[0mdefault_security_group_id[0m[0m        = (known after apply)
      [32m+[0m [0m[1m[0mdhcp_options_id[0m[0m                  = (known after apply)
      [32m+[0m [0m[1m[0menable_classiclink[0m[0m               = (known after apply)
      [32m+[0m [0m[1m[0menable_classiclink_dns_support[0m[0m   = (known after apply)
      [32m+[0m [0m[1m[0menable_dns_hostnames[0m[0m             = true
      [32m+[0m [0m[1m[0menable_dns_support[0m[0m               = true
      [32m+[0m [0m[1m[0mid[0m[0m                               = (known after apply)
      [32m+[0m [0m[1m[0minstance_tenancy[0m[0m                 = "default"
      [32m+[0m [0m[1m[0mipv6_association_id[0m[0m              = (known after apply)
      [32m+[0m [0m[1m[0mipv6_cidr_block[0m[0m                  = (known after apply)
      [32m+[0m [0m[1m[0mmain_route_table_id[0m[0m              = (known after apply)
      [32m+[0m [0m[1m[0mowner_id[0m[0m                         = (known after apply)
      [32m+[0m [0m[1m[0mtags[0m[0m                             = (known after apply)
      [32m+[0m [0m[1m[0mtags_all[0m[0m                         = (known after apply)
    }

[1m  # random_id.random-string[0m will be created[0m[0m
[0m  [32m+[0m[0m resource "random_id" "random-string" {
      [32m+[0m [0m[1m[0mb64_std[0m[0m     = (known after apply)
      [32m+[0m [0m[1m[0mb64_url[0m[0m     = (known after apply)
      [32m+[0m [0m[1m[0mbyte_length[0m[0m = 4
      [32m+[0m [0m[1m[0mdec[0m[0m         = (known after apply)
      [32m+[0m [0m[1m[0mhex[0m[0m         = (known after apply)
      [32m+[0m [0m[1m[0mid[0m[0m          = (known after apply)
    }

[0m[1mPlan:[0m 24 to add, 0 to change, 0 to destroy.[0m

------------------------------------------------------------------------

Note: You didn't specify an "-out" parameter to save this plan, so Terraform
can't guarantee that exactly these actions will be performed if
"terraform apply" is subsequently run.

[0m[1mrandom_id.random-string: Creating...[0m[0m
[0m[1mrandom_id.random-string: Creation complete after 0s [id=7JnJpA][0m[0m
[0m[1maws_key_pair.main: Creating...[0m[0m
[0m[1maws_iam_role.demo-master: Creating...[0m[0m
[0m[1maws_iam_role.demo-node: Creating...[0m[0m
[0m[1maws_vpc.main: Creating...[0m[0m
[0m[1maws_iam_role.web_iam_role: Creating...[0m[0m
[0m[1maws_key_pair.main: Creation complete after 3s [id=kpNGINX-3969501604][0m[0m
[0m[1maws_iam_role.web_iam_role: Creation complete after 4s [id=web_iam_role-3969501604][0m[0m
[0m[1maws_iam_role_policy.web_iam_role_policy: Creating...[0m[0m
[0m[1maws_iam_instance_profile.iam_nginx_profile: Creating...[0m[0m
[0m[1maws_iam_role.demo-master: Creation complete after 4s [id=nginx-eks-cluster-3969501604][0m[0m
[0m[1maws_iam_role_policy_attachment.demo-cluster-AmazonEKSServicePolicy: Creating...[0m[0m
[0m[1maws_iam_role_policy_attachment.demo-cluster-AmazonEKSClusterPolicy: Creating...[0m[0m
[0m[1maws_iam_role.demo-node: Creation complete after 4s [id=nginx-eks-demo-node-3969501604][0m[0m
[0m[1maws_iam_role_policy_attachment.demo-node-AmazonEKSWorkerNodePolicy: Creating...[0m[0m
[0m[1maws_iam_role_policy_attachment.demo-node-AmazonEC2ContainerRegistryReadOnly: Creating...[0m[0m
[0m[1maws_iam_role_policy_attachment.demo-node-AmazonEKS_CNI_Policy: Creating...[0m[0m
[0m[1maws_iam_role_policy.web_iam_role_policy: Creation complete after 2s [id=web_iam_role-3969501604:web_iam_role_policy-3969501604][0m[0m
[0m[1maws_iam_role_policy_attachment.demo-cluster-AmazonEKSServicePolicy: Creation complete after 2s [id=nginx-eks-cluster-3969501604-20220913074314010300000001][0m[0m
[0m[1maws_iam_role_policy_attachment.demo-cluster-AmazonEKSClusterPolicy: Creation complete after 2s [id=nginx-eks-cluster-3969501604-20220913074314031000000002][0m[0m
[0m[1maws_iam_role_policy_attachment.demo-node-AmazonEKSWorkerNodePolicy: Creation complete after 2s [id=nginx-eks-demo-node-3969501604-20220913074314061300000003][0m[0m
[0m[1maws_iam_role_policy_attachment.demo-node-AmazonEKS_CNI_Policy: Creation complete after 2s [id=nginx-eks-demo-node-3969501604-20220913074314066000000004][0m[0m
[0m[1maws_iam_role_policy_attachment.demo-node-AmazonEC2ContainerRegistryReadOnly: Creation complete after 2s [id=nginx-eks-demo-node-3969501604-20220913074314071000000005][0m[0m
[0m[1maws_iam_instance_profile.iam_nginx_profile: Creation complete after 3s [id=web_instance_profile-3969501604][0m[0m
[0m[1maws_vpc.main: Still creating... [10s elapsed][0m[0m
[0m[1maws_vpc.main: Still creating... [20s elapsed][0m[0m
[0m[1maws_vpc.main: Creation complete after 26s [id=vpc-0ee40b22ae771d5f2][0m[0m
[0m[1maws_internet_gateway.gw: Creating...[0m[0m
[0m[1maws_subnet.management-subnet: Creating...[0m[0m
[0m[1maws_subnet.public-subnet: Creating...[0m[0m
[0m[1maws_subnet.private-subnet: Creating...[0m[0m
[0m[1maws_security_group.sgweb: Creating...[0m[0m
[0m[1maws_internet_gateway.gw: Creation complete after 6s [id=igw-09f4d865505ffbbf5][0m[0m
[0m[1maws_route_table.web-public-rt: Creating...[0m[0m
[0m[1maws_subnet.management-subnet: Still creating... [10s elapsed][0m[0m
[0m[1maws_subnet.public-subnet: Still creating... [10s elapsed][0m[0m
[0m[1maws_subnet.private-subnet: Still creating... [10s elapsed][0m[0m
[0m[1maws_security_group.sgweb: Still creating... [10s elapsed][0m[0m
[0m[1maws_security_group.sgweb: Creation complete after 10s [id=sg-0774527040e9520b7][0m[0m
[0m[1maws_route_table.web-public-rt: Creation complete after 5s [id=rtb-05d74e7f9d3e48a4f][0m[0m
[0m[1maws_subnet.management-subnet: Creation complete after 16s [id=subnet-0932cd79ca6217362][0m[0m
[0m[1maws_subnet.public-subnet: Creation complete after 16s [id=subnet-00400244c0983e1cb][0m[0m
[0m[1maws_subnet.private-subnet: Creation complete after 16s [id=subnet-05b7621f021c23a9c][0m[0m
[0m[1maws_route_table_association.web-public-rt: Creating...[0m[0m
[0m[1maws_route_table_association.web-private-rt: Creating...[0m[0m
[0m[1maws_eks_cluster.demo: Creating...[0m[0m
[0m[1maws_instance.controller: Creating...[0m[0m
[0m[1maws_route_table_association.web-public-rt: Creation complete after 1s [id=rtbassoc-0a3647df22064da05][0m[0m
[0m[1maws_route_table_association.web-private-rt: Creation complete after 1s [id=rtbassoc-0eed65cba4eb72ed1][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [10s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [20s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [30s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [40s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [50s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [1m0s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [1m10s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [1m20s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [1m30s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [1m40s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [1m50s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [2m0s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [2m10s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [2m20s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [2m30s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [2m40s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [2m50s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [3m0s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [3m10s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [3m20s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [3m30s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [3m40s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [3m50s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [4m0s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [4m10s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [4m20s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [4m30s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [4m40s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [4m50s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [5m0s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [5m10s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [5m20s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [5m30s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [5m40s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [5m50s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [6m0s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [6m10s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [6m20s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [6m30s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [6m40s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [6m50s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [7m0s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [7m10s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [7m20s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [7m30s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [7m40s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [7m50s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [8m0s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [8m10s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [8m20s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Still creating... [8m30s elapsed][0m[0m
[0m[1maws_eks_cluster.demo: Creation complete after 8m38s [id=terraform-eks-3969501604][0m[0m
[0m[1maws_eks_node_group.demo: Creating...[0m[0m
[0m[1maws_eks_node_group.demo: Still creating... [10s elapsed][0m[0m
[0m[1maws_eks_node_group.demo: Still creating... [20s elapsed][0m[0m
[0m[1maws_eks_node_group.demo: Still creating... [30s elapsed][0m[0m
[0m[1maws_eks_node_group.demo: Still creating... [40s elapsed][0m[0m
[0m[1maws_eks_node_group.demo: Still creating... [50s elapsed][0m[0m
[0m[1maws_eks_node_group.demo: Still creating... [1m0s elapsed][0m[0m
[0m[1maws_eks_node_group.demo: Still creating... [1m10s elapsed][0m[0m
[0m[1maws_eks_node_group.demo: Still creating... [1m20s elapsed][0m[0m
[0m[1maws_eks_node_group.demo: Still creating... [1m30s elapsed][0m[0m
[0m[1maws_eks_node_group.demo: Still creating... [1m40s elapsed][0m[0m
[0m[1maws_eks_node_group.demo: Still creating... [1m50s elapsed][0m[0m
[0m[1maws_eks_node_group.demo: Still creating... [2m0s elapsed][0m[0m
[0m[1maws_eks_node_group.demo: Still creating... [2m10s elapsed][0m[0m
[0m[1maws_eks_node_group.demo: Still creating... [2m20s elapsed][0m[0m
[0m[1maws_eks_node_group.demo: Still creating... [2m30s elapsed][0m[0m
[0m[1maws_eks_node_group.demo: Still creating... [2m40s elapsed][0m[0m
[0m[1maws_eks_node_group.demo: Creation complete after 2m41s [id=terraform-eks-3969501604:eks-3969501604][0m[0m
[31m
[1m[31mError: [0m[0m[1mError launching source instance: PendingVerification: Your request for accessing resources in this region is being validated, and you will not be able to launch additional resources in this region until the validation is complete. We will notify you by email once your request has been validated. While normally resolved within minutes, please allow up to 4 hours for this process to complete. If the issue still persists, please let us know by writing to aws-verification@amazon.com for further assistance.
	status code: 400, request id: 3cbe8e7a-1bb8-44ed-bc4c-c6afd06237d7[0m

[0m  on controller.tf line 61, in resource "aws_instance" "controller":
  61: resource "aws_instance" "controller" [4m{[0m
[0m
[0m[0m
[0m[1mrandom_id.random-string: Refreshing state... [id=7JnJpA][0m
[0m[1maws_key_pair.main: Refreshing state... [id=kpNGINX-3969501604][0m
[0m[1maws_iam_role.demo-master: Refreshing state... [id=nginx-eks-cluster-3969501604][0m
[0m[1maws_iam_role.demo-node: Refreshing state... [id=nginx-eks-demo-node-3969501604][0m
[0m[1maws_vpc.main: Refreshing state... [id=vpc-0ee40b22ae771d5f2][0m
[0m[1maws_iam_role.web_iam_role: Refreshing state... [id=web_iam_role-3969501604][0m
[0m[1maws_iam_role_policy_attachment.demo-cluster-AmazonEKSServicePolicy: Refreshing state... [id=nginx-eks-cluster-3969501604-20220913074314010300000001][0m
[0m[1maws_iam_role_policy_attachment.demo-cluster-AmazonEKSClusterPolicy: Refreshing state... [id=nginx-eks-cluster-3969501604-20220913074314031000000002][0m
[0m[1maws_iam_role_policy_attachment.demo-node-AmazonEKS_CNI_Policy: Refreshing state... [id=nginx-eks-demo-node-3969501604-20220913074314066000000004][0m
[0m[1maws_iam_role_policy_attachment.demo-node-AmazonEC2ContainerRegistryReadOnly: Refreshing state... [id=nginx-eks-demo-node-3969501604-20220913074314071000000005][0m
[0m[1maws_iam_role_policy_attachment.demo-node-AmazonEKSWorkerNodePolicy: Refreshing state... [id=nginx-eks-demo-node-3969501604-20220913074314061300000003][0m
[0m[1maws_iam_instance_profile.iam_nginx_profile: Refreshing state... [id=web_instance_profile-3969501604][0m
[0m[1maws_iam_role_policy.web_iam_role_policy: Refreshing state... [id=web_iam_role-3969501604:web_iam_role_policy-3969501604][0m
[0m[1maws_internet_gateway.gw: Refreshing state... [id=igw-09f4d865505ffbbf5][0m
[0m[1maws_subnet.public-subnet: Refreshing state... [id=subnet-00400244c0983e1cb][0m
[0m[1maws_subnet.private-subnet: Refreshing state... [id=subnet-05b7621f021c23a9c][0m
[0m[1maws_security_group.sgweb: Refreshing state... [id=sg-0774527040e9520b7][0m
[0m[1maws_subnet.management-subnet: Refreshing state... [id=subnet-0932cd79ca6217362][0m
[0m[1maws_route_table.web-public-rt: Refreshing state... [id=rtb-05d74e7f9d3e48a4f][0m
[0m[1maws_eks_cluster.demo: Refreshing state... [id=terraform-eks-3969501604][0m
[0m[1maws_eks_node_group.demo: Refreshing state... [id=terraform-eks-3969501604:eks-3969501604][0m
[0m[1maws_route_table_association.web-public-rt: Refreshing state... [id=rtbassoc-0a3647df22064da05][0m
[0m[1maws_route_table_association.web-private-rt: Refreshing state... [id=rtbassoc-0eed65cba4eb72ed1][0m
[0m[1maws_instance.controller: Creating...[0m[0m
[0m[1maws_instance.controller: Still creating... [10s elapsed][0m[0m
[0m[1maws_instance.controller: Still creating... [20s elapsed][0m[0m
[0m[1maws_instance.controller: Creation complete after 22s [id=i-0c32eb4f44a83f004][0m[0m
[0m[1m[32m
Apply complete! Resources: 1 added, 0 changed, 0 destroyed.[0m
[0m[1m[32m
Outputs:

config_map_aws_auth = apiVersion: v1
kind: ConfigMap
metadata:
  name: aws-auth
  namespace: kube-system
data:
  mapRoles: |
    - rolearn: arn:aws:iam::330428859659:role/nginx-eks-demo-node-3969501604
      username: system:node:{{EC2PrivateDNSName}}
      groups:
        - system:bootstrappers
        - system:nodes

kubeconfig = apiVersion: v1
clusters:
- cluster:
    server: https://A7D21EDE258834C09A8DF563B70086E9.gr7.eu-west-1.eks.amazonaws.com
    certificate-authority-data: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUM1ekNDQWMrZ0F3SUJBZ0lCQURBTkJna3Foa2lHOXcwQkFRc0ZBREFWTVJNd0VRWURWUVFERXdwcmRXSmwKY201bGRHVnpNQjRYRFRJeU1Ea3hNekEzTkRrd05Wb1hEVE15TURreE1EQTNORGt3TlZvd0ZURVRNQkVHQTFVRQpBeE1LYTNWaVpYSnVaWFJsY3pDQ0FTSXdEUVlKS29aSWh2Y05BUUVCQlFBRGdnRVBBRENDQVFvQ2dnRUJBTUI5ClB5eWZnVXFERlduQldvRm5EZ1cwRW1UMWRMb0JvZWJQcHc3bkQ0Y01aTDZNK05GU3owQlJYdUpkMlh5SWpOUVIKcUdYWDZzT0N1R1U0MjdKRWxBMUloRlFIVkRKZW1zaXlMTTVMSmZad2ZZVUNSS25VTjZlS2hvVXZUUjJRM0FNaAp3M1N4L3FRaHorK0ZtTzVsdVVkUjNHM1NYeHhSWFZQNk5haWhLcHJhblRtc2RwVmthVk9nVzV2OE9weThxUXB1CnMxdmFnamJPempndmxYZ1hXSEU1ZlJJdXYwK0dtbERwSlpSR3RnTHNyL1FFaHVQZWRPMXlaYTd3UmF4c0x0VjIKU1UydTdDenZNb2toeUF2Nm04Nkkydk03RTNHNU5YZkU5NHRURXBDVDFLQTJ3ZFM2VU1TdXJCUVM3SmViU2w3WgpiaWQxU3Q2SDFQZ1UweFlYVWZNQ0F3RUFBYU5DTUVBd0RnWURWUjBQQVFIL0JBUURBZ0trTUE4R0ExVWRFd0VCCi93UUZNQU1CQWY4d0hRWURWUjBPQkJZRUZMNk04dXYvOVdSZnZRMDFGekcyL3RsU2JrOWFNQTBHQ1NxR1NJYjMKRFFFQkN3VUFBNElCQVFDV0lJeFRSZWlZTTBsbXArU2wwd2tFMjlLU2ZtTkRZVWtvOHJ2VEN0SHF4VnlEQmdyOQorQlpiSTJobTFuYWM4Yi9vdTBQeHVxU01jeW1ZVm96ZU5IZVVBS2lLVUZxOFk0TVQrUXFFZFZOejZ6aVdpWGVCCnQ2ZjRHZlJvQUNUb2NxajREYUk0RzE3ZEJrYmpkWFpHUVVwRnNBMTlRYnVFeVlIZ0ZNbWJXNVkyN0NBbWIrUFgKYzlwZDQwbEpPS2ZyeUhNYTJIQXBLV3YrWkRiOElucEZQdGdZaFVvWGRXZ3JxVHJCdmZyak5LOEpySTZJWUpSaQpFLzNIcnlsSFB4UXpneTRkNTJKN0pMZXZldUhndVVHOUx4ZXhzOXIxU1JyWjBFWkcyd0dLanIwQ2xSUCtla3JKCk1kM0hqNFRWMDRmenFZSFllOWFDcHEzaFo5ZEhNSkdNdlB0bQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  name: kubernetes
contexts:
- context:
    cluster: kubernetes
    user: aws
  name: aws
current-context: aws
kind: Config
preferences: {}
users:
- name: aws
  user:
    exec:
      apiVersion: client.authentication.k8s.io/v1alpha1
      command: aws-iam-authenticator
      args:
        - "token"
        - "-i"
        - "terraform-eks-3969501604"[0m
mkdir: cannot create directory ‘/home/ubuntu/.kube/’: File exists
ALL IS DONE
